<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malosha - Voting System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
        }

        h1 {
            color: #333;
        }

        .vote-option {
            margin: 10px 0;
        }

        input[type="radio"] {
            margin-right: 10px;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        button:hover {
            background-color: #0056b3;
        }

        #results {
            margin-top: 20px;
            display: none;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
        }

        .result {
            margin: 5px 0;
        }

        #adminSection {
            margin-top: 20px;
            display: none;
        }

        input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-top: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .admin-btn {
            margin-top: 10px;
            background-color: #28a745;
            width: 100%;
        }

        #adminButton {
            background-color: #28a745;
        }

        .ellipsis {
            font-size: 24px;
            cursor: pointer;
            margin-top: 10px;
        }

        .settings-menu {
            display: none;
            background-color: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }

        .settings-menu button {
            width: 100%;
            background-color: #ff5722;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Malosha - Voting System</h1>
        <div id="pollQuestionDiv">
            <h2 id="pollQuestion">What stage of life are you in?</h2>
        </div>
        <div class="vote-option">
            <input type="radio" id="optionA" name="vote" value="A. Mke">
            <label for="optionA" id="optionALabel">A. Mke</label>
        </div>
        <div class="vote-option">
            <input type="radio" id="optionB" name="vote" value="B. Mume">
            <label for="optionB" id="optionBLabel">B. Mume</label>
        </div>
        <div class="vote-option">
            <input type="radio" id="optionC" name="vote" value="C. Una moto">
            <label for="optionC" id="optionCLabel">C. Una moto</label>
        </div>
        <div class="vote-option">
            <input type="radio" id="optionD" name="vote" value="D. Upo upo tu">
            <label for="optionD" id="optionDLabel">D. Upo upo tu</label>
        </div>
        <button onclick="submitVote()">Submit Vote</button>

        <div id="results">
            <h2>Results</h2>
            <div class="result" id="resultA">A. Mke: 0 votes</div>
            <div class="result" id="resultB">B. Mume: 0 votes</div>
            <div class="result" id="resultC">C. Una moto: 0 votes</div>
            <div class="result" id="resultD">D. Upo upo tu: 0 votes</div>
        </div>

        <div id="adminSection">
            <h2>Admin - Edit Poll</h2>
            <label for="newQuestion">New Question:</label>
            <input type="text" id="newQuestion" placeholder="Enter new question" />
            <label for="newOptionA">New Option A:</label>
            <input type="text" id="newOptionA" placeholder="Enter Option A" />
            <label for="newOptionB">New Option B:</label>
            <input type="text" id="newOptionB" placeholder="Enter Option B" />
            <label for="newOptionC">New Option C:</label>
            <input type="text" id="newOptionC" placeholder="Enter Option C" />
            <label for="newOptionD">New Option D:</label>
            <input type="text" id="newOptionD" placeholder="Enter Option D" />
            <button class="admin-btn" onclick="updatePoll()">Save Changes</button>

            <div class="ellipsis" onclick="toggleSettingsMenu()">&#8230; Settings</div>
            <div class="settings-menu" id="settingsMenu">
                <button onclick="clearVotes()">Clear All Votes</button>
                <button onclick="resetPoll()">Reset Poll</button>
                <button onclick="viewResults()">View Results</button>
            </div>
        </div>

        <button id="adminButton" onclick="loginAdmin()">Malosha Use Only (Admin)</button>
    </div>

    <script>
        let votes = { 'A. Mke': 0, 'B. Mume': 0, 'C. Una moto': 0, 'D. Upo upo tu': 0 };
        let isAdmin = false;
        let hasVoted = false; // Ensures that a user can vote only once

        // Submit Vote
        function submitVote() {
            if (hasVoted) {
                alert('You have already voted.');
                return;
            }

            const selectedOption = document.querySelector('input[name="vote"]:checked');
            if (!selectedOption) {
                alert('Please choose an option before submitting.');
                return;
            }

            const option = selectedOption.value;
            votes[option]++;
            hasVoted = true;

            // Update the result display
            document.getElementById('resultA').innerText = `A. Mke: ${votes['A. Mke']} votes`;
            document.getElementById('resultB').innerText = `B. Mume: ${votes['B. Mume']} votes`;
            document.getElementById('resultC').innerText = `C. Una moto: ${votes['C. Una moto']} votes`;
            document.getElementById('resultD').innerText = `D. Upo upo tu: ${votes['D. Upo upo tu']} votes`;

            // Show the results section
            document.getElementById('results').style.display = 'block';
        }

        // Show Admin Section (Login as Admin)
        function loginAdmin() {
            const password = prompt("Enter Admin Password:");
            if (password === "00361") {
                isAdmin = true;
                document.getElementById('adminSection').style.display = 'block';
                document.getElementById('adminButton').style.display = 'none'; // Hide the Admin button after login
                alert("You are logged in as Admin!");
            } else {
                alert("Incorrect password.");
            }
        }

        // Update Poll Question & Options
        function updatePoll() {
            const newQuestion = document.getElementById('newQuestion').value;
            const newOptionA = document.getElementById('newOptionA').value;
            const newOptionB = document.getElementById('newOptionB').value;
            const newOptionC = document.getElementById('newOptionC').value;
            const newOptionD = document.getElementById('newOptionD').value;

            if (newQuestion && newOptionA && newOptionB && newOptionC && newOptionD) {
                document.getElementById('pollQuestion').innerText = newQuestion;
                document.getElementById('optionALabel').innerText = newOptionA;
                document.getElementById('optionBLabel').innerText = newOptionB;
                document.getElementById('optionCLabel').innerText = newOptionC;
                document.getElementById('optionDLabel').innerText = newOptionD;
                alert("Question and options updated!");
            } else {
                alert("Please fill in all fields.");
            }
        }

        // Toggle Settings Menu
        function toggleSettingsMenu() {
            const menu = document.getElementById('settingsMenu');
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        }

        // Clear All Votes
        function clearVotes() {
            votes = { 'A. Mke': 0, 'B. Mume': 0, 'C. Una moto': 0, 'D. Upo upo tu': 0 };
            document.getElementById('resultA').innerText = `A. Mke: 0 votes`;
            document.getElementById('resultB').innerText = `B. Mume: 0 votes`;
            document.getElementById('resultC').innerText = `C. Una moto: 0 votes`;
            document.getElementById('resultD').innerText = `D. Upo upo tu: 0 votes`;
            alert("All votes have been cleared.");
        }

        // Reset Poll
        function resetPoll() {
            document.getElementById('pollQuestion').innerText = "What stage of life are you in?";
            document.getElementById('optionALabel').innerText = "A. Mke";
            document.getElementById('optionBLabel').innerText = "B. Mume";
            document.getElementById('optionCLabel').innerText = "C. Una moto";
            document.getElementById('optionDLabel').innerText = "D. Upo upo tu";
            alert("Poll has been reset.");
        }
    </script>
</body>
</html>