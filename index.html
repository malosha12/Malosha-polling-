Ukague huu mfumo uniambie Hadi hapa  una ubora gani
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malosha Polling System</title>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

    <!-- Firebase Configuration -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAEwWF8dqELCbOYbpzij043u4Mw074FMmA",
            authDomain: "lastg7-af603.firebaseapp.com",
            projectId: "lastg7-af603",
            storageBucket: "lastg7-af603.firebasestorage.app",
            messagingSenderId: "629862528860",
            appId: "1:629862528860:web:5ddf0a222c7a5a1bd5f399"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
    </script>

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #007bff;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }

        .container {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 400px;
            text-align: center;
        }

        h1 {
            color: #333;
        }

        h2 {
            color: #0056b3;
        }

        .vote-option {
            margin: 10px 0;
            display: flex;
            align-items: center;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .vote-option:hover {
            background-color: #e6f7ff;
        }

        .vote-option input[type="radio"] {
            margin-right: 10px;
            accent-color: #0056b3;
        }

        button {
            background-color: #0056b3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        button:hover {
            background-color: #003f7f;
        }

        #results {
            margin-top: 20px;
            display: none;
        }

        canvas {
            margin-top: 20px;
        }

        .admin-section {
            display: none;
            margin-top: 20px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: left;
        }

        .reply-section {
            display: none;
            margin-top: 20px;
        }
    </style>

</head>
<body>

    <div class="container">
        <h1>Malosha Polling System</h1>
        <h2>What stage of life are you in?</h2>
        <div class="vote-option">
            <input type="radio" id="optionA" name="vote" value="A. Married Woman">
            <label for="optionA">A. Married Woman (Mke)</label>
        </div>
        <div class="vote-option">
            <input type="radio" id="optionB" name="vote" value="B. Married Man">
            <label for="optionB">B. Married Man (Mume)</label>
        </div>
        <div class="vote-option">
            <input type="radio" id="optionC" name="vote" value="C. In a Relationship">
            <label for="optionC">C. In a Relationship (Una Moto)</label>
        </div>
        <div class="vote-option">
            <input type="radio" id="optionD" name="vote" value="D. Single">
            <label for="optionD">D. Single (Upo Upo Tu)</label>
        </div>
        <button onclick="submitVote()">Submit Vote</button>

        <div id="results">
            <h2>Results</h2>
            <canvas id="voteChart"></canvas>
        </div>
    </div>

    <button class="share-button" onclick="sharePoll()">Share Poll</button>
    <button class="share-button" onclick="showAdminSection()">Admin Login</button>

    <div class="admin-section" id="adminSection">
        <h2>Admin Section</h2>
        <label for="adminPassword">Enter Admin Password:</label>
        <input type="text" id="adminPassword" placeholder="Enter password" />
        <button onclick="validateAdmin()">Login</button>
        <div id="detailedResults" style="display: none;">
            <h3>Detailed Results:</h3>
            <p id="resultA"></p>
            <p id="resultB"></p>
            <p id="resultC"></p>
            <p id="resultD"></p>
        </div>
    </div>

    <div id="smsCommentSection">
        <h2>Leave your comment via SMS:</h2>
        <textarea id="smsComment" rows="4" placeholder="Enter your comment here..."></textarea>
        <button class="reply-button" onclick="submitComment()">Submit Comment</button>
    </div>

    <div id="notification">You have a new comment!</div>

    <div class="reply-section" id="replySection">
        <h2>Reply to Comment:</h2>
        <textarea id="smsReply" class="reply-textarea" rows="4" placeholder="Type your reply here..."></textarea>
        <button class="reply-button" onclick="submitReply()">Send Reply</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        let votes = { 'A. Married Woman': 0, 'B. Married Man': 0, 'C. In a Relationship': 0, 'D. Single': 0 };
        let hasVoted = false;

        function submitVote() {
            if (hasVoted) {
                alert("You can only vote once.");
                return;
            }

            const selectedOption = document.querySelector('input[name="vote"]:checked');
            if (!selectedOption) {
                alert("Please select an option before voting.");
                return;
            }

            const option = selectedOption.value;
            votes[option]++;
            hasVoted = true;

            // Update Firebase database with the new vote counts
            const votesRef = database.ref('votes');
            votesRef.set(votes);

            const ctx = document.getElementById('voteChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(votes),
                    datasets: [{
                        label: 'Votes',
                        data: Object.values(votes),
                        backgroundColor: ['#ff6384', '#36a2eb', '#ffcd56', '#4bc0c0']
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            document.getElementById('results').style.display = 'block';
        }

        function sharePoll() {
            const pollUrl = "https://malosha12.github.io/Malosha-polling-/";
            navigator.clipboard.writeText(pollUrl).then(() => {
                alert("Poll link copied to clipboard! Share it with others.");
            }).catch(() => {
                alert("Failed to copy link.");
            });
        }

        function showAdminSection() {
            document.getElementById("adminSection").style.display = "block";
        }

        function validateAdmin() {
            const password = document.getElementById("adminPassword").value;
            if (password === "1340") {
                document.getElementById("detailedResults").style.display = "block";
                document.getElementById("resultA").textContent = `A. Married Woman: ${votes['A. Married Woman']} votes`;
                document.getElementById("resultB").textContent = `B. Married Man: ${votes['B. Married Man']} votes`;
                document.getElementById("resultC").textContent = `C. In a Relationship: ${votes['C. In a Relationship']} votes`;
                document.getElementById("resultD").textContent = `D. Single: ${votes['D. Single']} votes`;
            } else {
                alert("Incorrect password!");
            }
        }

        // Functions forcomments and replies
        function submitComment() {
            const comment = document.getElementById("smsComment").value;
            if (comment.trim() === "") {
                alert("Please enter a comment before submitting.");
                return;
            }

            // Save the comment to Firebase
            const commentsRef = database.ref('comments').push();
            commentsRef.set({ comment });

            alert("Comment submitted successfully!");
            document.getElementById("smsComment").value = ""; // Clear the textarea
        }

        function submitReply() {
            const reply = document.getElementById("smsReply").value;
            if (reply.trim() === "") {
                alert("Please enter a reply before submitting.");
                return;
            }

            // Save the reply to Firebase
            const repliesRef = database.ref('replies').push();
            repliesRef.set({ reply });

            alert("Reply submitted successfully!");
            document.getElementById("smsReply").value = ""; // Clear the textarea
        }

        // Firebase listener for new comments (optional: notify admin or update UI)
        const commentsRef = database.ref('comments');
        commentsRef.on('child_added', (snapshot) => {
            const newComment = snapshot.val();
            document.getElementById("notification").style.display = "block";
            document.getElementById("notification").textContent = `New comment: ${newComment.comment}`;
        });

        // Close notification on click
        document.getElementById("notification").addEventListener("click", () => {
            document.getElementById("notification").style.display = "none";
        });
    </script>
</body>
</html>